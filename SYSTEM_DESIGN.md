# ì‹œìŠ¤í…œ ì„¤ê³„ì„œ (System Design Document)

ê²½ë¶€ê³ ì†ë„ë¡œ ì‹¤ì‹œê°„ êµí†µì •ë³´ ì‹œìŠ¤í…œ

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#2-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [ê¸°ìˆ  ìŠ¤íƒ](#3-ê¸°ìˆ -ìŠ¤íƒ)
4. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#4-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
5. [API ì„¤ê³„](#5-api-ì„¤ê³„)
6. [í™”ë©´ ì„¤ê³„](#6-í™”ë©´-ì„¤ê³„)
7. [AI ëª¨ë¸ ì„¤ê³„](#7-ai-ëª¨ë¸-ì„¤ê³„)
8. [ë³´ì•ˆ ì„¤ê³„](#8-ë³´ì•ˆ-ì„¤ê³„)
9. [ë°°í¬ ë° ìš´ì˜](#9-ë°°í¬-ë°-ìš´ì˜)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 í”„ë¡œì íŠ¸ ëª©í‘œ
ê²½ë¶€ê³ ì†ë„ë¡œ ìˆ˜ì›-ì²œì•ˆ êµ¬ê°„ì˜ ì‹¤ì‹œê°„ êµí†µ ìƒí™©ì„ ëª¨ë‹ˆí„°ë§í•˜ê³ , AI ê¸°ë°˜ ì˜ˆì¸¡ì„ í†µí•´ ì‚¬ìš©ìì—ê²Œ êµí†µ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ì›¹ ê¸°ë°˜ ì‹œìŠ¤í…œ

### 1.2 ì£¼ìš” ê¸°ëŠ¥
- âœ… ì‹¤ì‹œê°„ êµí†µ ì†ë„ ëª¨ë‹ˆí„°ë§
- âœ… AI ê¸°ë°˜ êµí†µ ì†ë„ ì˜ˆì¸¡ (XGBoost)
- âœ… CCTV ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë°
- âœ… ëŒë°œ ìƒí™© ë° ì•ˆì „ì •ë³´ ì œê³µ
- âœ… ì·¨ì•½êµ¬ê°„ ì •ë³´ (ì•ˆê°œ/ê²°ë¹™)
- âœ… ì¸í„°ë™í‹°ë¸Œ ì§€ë„ ê¸°ë°˜ UI

### 1.3 ëŒ€ìƒ ì‚¬ìš©ì
- ê²½ë¶€ê³ ì†ë„ë¡œ ìˆ˜ì›-ì²œì•ˆ êµ¬ê°„ ì´ìš©ì
- êµí†µ ìƒí™© ëª¨ë‹ˆí„°ë§ì´ í•„ìš”í•œ ìš´ì „ì
- êµí†µ ë°ì´í„° ë¶„ì„ ê´€ì‹¬ì

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì„±ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì‚¬ìš©ì (Web Browser)                        â”‚
â”‚                     Chrome / Firefox / Safari                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTP/HTTPS
                             â”‚ REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Express.js ì›¹ ì„œë²„ (Port 3000)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    ë¼ìš°í„° ê³„ì¸µ                             â”‚  â”‚
â”‚  â”‚  /api/traffic    /api/cctv     /api/predict               â”‚  â”‚
â”‚  â”‚  /api/warnings   /api/vms      /api/vulnerable            â”‚  â”‚
â”‚  â”‚  /api/events     /api/dangerous                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    ì„œë¹„ìŠ¤ ê³„ì¸µ                             â”‚  â”‚
â”‚  â”‚  - Axios HTTP í´ë¼ì´ì–¸íŠ¸                                  â”‚  â”‚
â”‚  â”‚  - Child Process (Python AI ì‹¤í–‰)                        â”‚  â”‚
â”‚  â”‚  - CSV íŒŒì¼ ë¦¬ë” (fs, iconv-lite)                        â”‚  â”‚
â”‚  â”‚  - HTTPS Agent (SSL ì¸ì¦ì„œ ì²˜ë¦¬)                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ITS Open API     â”‚   â”‚  Python AI ëª¨ë“ˆ    â”‚
    â”‚  (í•œêµ­ë„ë¡œê³µì‚¬)    â”‚   â”‚  - ai_server.py    â”‚
    â”‚  - êµí†µì†ë„        â”‚   â”‚  - XGBoost         â”‚
    â”‚  - CCTV ì˜ìƒ      â”‚   â”‚  - pandas          â”‚
    â”‚  - ëŒë°œìƒí™©        â”‚   â”‚                    â”‚
    â”‚  - VMS           â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ì •ì  ë°ì´í„°       â”‚
    â”‚  - history.csv    â”‚
    â”‚  - ì•ˆê°œì·¨ì•½.csv    â”‚
    â”‚  - ê²°ë¹™êµ¬ê°„.csv    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ê³„ì¸µë³„ êµ¬ì¡°

#### 2.2.1 í”„ë ˆì  í…Œì´ì…˜ ê³„ì¸µ (Presentation Layer)
```
public/
â”œâ”€â”€ index.html      # ë©”ì¸ HTML êµ¬ì¡°
â”œâ”€â”€ style.css       # ìŠ¤íƒ€ì¼ì‹œíŠ¸ (ê²€ì€ìƒ‰/í°ìƒ‰ ë¯¸ë‹ˆë©€ ë””ìì¸)
â”œâ”€â”€ script.js       # í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë¡œì§
```

**ì—­í• :**
- ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ë Œë”ë§
- ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬
- API í˜¸ì¶œ ë° ë°ì´í„° í‘œì‹œ
- ì§€ë„ ë° ì°¨íŠ¸ ì‹œê°í™”

#### 2.2.2 ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì¸µ (Application Layer)
```
server.js           # Express.js ë©”ì¸ ì„œë²„
```

**ì—­í• :**
- REST API ì—”ë“œí¬ì¸íŠ¸ ì œê³µ
- ì™¸ë¶€ API í˜¸ì¶œ (ITS Open API)
- Python AI ëª¨ë“ˆ ì‹¤í–‰
- CSV íŒŒì¼ ë°ì´í„° ì²˜ë¦¬
- ì‘ë‹µ ë°ì´í„° ê°€ê³µ

#### 2.2.3 AI/ë¶„ì„ ê³„ì¸µ (AI/Analytics Layer)
```
ai_server.py        # XGBoost êµí†µ ì˜ˆì¸¡ ëª¨ë¸
```

**ì—­í• :**
- ë¨¸ì‹ ëŸ¬ë‹ ëª¨ë¸ í•™ìŠµ
- êµí†µ ì†ë„ ì˜ˆì¸¡
- ìœ„í—˜ë„ ë¶„ì„
- 12ì‹œê°„ ì˜ˆë³´ ìƒì„±

#### 2.2.4 ë°ì´í„° ê³„ì¸µ (Data Layer)
```
data/
â”œâ”€â”€ history.csv                        # êµí†µ ì†ë„ íˆìŠ¤í† ë¦¬ (11,004ê±´)
â”œâ”€â”€ ì•ˆê°œì·¨ì•½.csv                        # ì•ˆê°œ ì·¨ì•½êµ¬ê°„ ë°ì´í„°
â””â”€â”€ í–‰ì •ì•ˆì „ë¶€_ìƒìŠµ ê²°ë¹™êµ¬ê°„.csv          # ê²°ë¹™ ì·¨ì•½êµ¬ê°„ ë°ì´í„°
```

**ì—­í• :**
- AI í•™ìŠµ ë°ì´í„° ì œê³µ
- ì·¨ì•½êµ¬ê°„ ì •ë³´ ì €ì¥

---

## 3. ê¸°ìˆ  ìŠ¤íƒ

### 3.1 ë°±ì—”ë“œ

#### 3.1.1 ëŸ°íƒ€ì„ í™˜ê²½
```javascript
Node.js v14+
- JavaScript ëŸ°íƒ€ì„
- ì´ë²¤íŠ¸ ê¸°ë°˜ ë¹„ë™ê¸° I/O
```

#### 3.1.2 ì›¹ í”„ë ˆì„ì›Œí¬
```javascript
Express.js v4.18
- ë¯¸ë“¤ì›¨ì–´ ê¸°ë°˜ ì›¹ í”„ë ˆì„ì›Œí¬
- RESTful API êµ¬í˜„
```

#### 3.1.3 ì£¼ìš” ì˜ì¡´ì„±
```javascript
{
  "axios": "^1.6.0",           // HTTP í´ë¼ì´ì–¸íŠ¸
  "iconv-lite": "^0.6.3",      // EUC-KR â†” UTF-8 ì¸ì½”ë”© ë³€í™˜
  "express": "^4.18.0"         // ì›¹ í”„ë ˆì„ì›Œí¬
}
```

### 3.2 í”„ë¡ íŠ¸ì—”ë“œ

#### 3.2.1 ì½”ì–´ ê¸°ìˆ 
```html
- HTML5
- CSS3
- Vanilla JavaScript (ES6+)
```

#### 3.2.2 ë¼ì´ë¸ŒëŸ¬ë¦¬
```javascript
{
  "Leaflet.js": "1.7.1",       // ì§€ë„ ë¼ì´ë¸ŒëŸ¬ë¦¬
  "Chart.js": "4.4.0",         // ë°ì´í„° ì‹œê°í™”
  "OpenStreetMap": "íƒ€ì¼ ì„œë²„" // ì§€ë„ íƒ€ì¼
}
```

#### 3.2.3 í°íŠ¸
```css
{
  "Pretendard": "í•œê¸€ ì›¹í°íŠ¸",
  "Inter": "ì˜ë¬¸/ìˆ«ì í°íŠ¸"
}
```

### 3.3 AI/ML

#### 3.3.1 Python í™˜ê²½
```python
Python 3.7+
```

#### 3.3.2 ë¨¸ì‹ ëŸ¬ë‹ ë¼ì´ë¸ŒëŸ¬ë¦¬
```python
{
  "xgboost": "2.0+",           # Gradient Boosting ëª¨ë¸
  "scikit-learn": "1.0+",      # ë°ì´í„° ì „ì²˜ë¦¬
  "pandas": "1.5+",            # ë°ì´í„°í”„ë ˆì„ ì²˜ë¦¬
  "numpy": "1.23+"             # ìˆ˜ì¹˜ ì—°ì‚°
}
```

### 3.4 ì™¸ë¶€ API

#### 3.4.1 ITS Open API (í•œêµ­ë„ë¡œê³µì‚¬)
```
Base URL: https://openapi.its.go.kr:9443
ì¸ì¦: API Key ë°©ì‹
ì‘ë‹µ í˜•ì‹: JSON
```

**ì‚¬ìš© ì—”ë“œí¬ì¸íŠ¸:**
- `cctvInfo` - CCTV ì •ë³´
- `trafficInfo` - êµí†µì†ë„ ì •ë³´
- `posIncidentInfo` - ëŒë°œìƒí™©
- `eventInfo` - ì´ë²¤íŠ¸ ì •ë³´
- `vmsInfo` - VMS ì „ê´‘íŒ
- `dangerousCarInfo` - ìœ„í—˜ë¬¼ì§ˆ ì°¨ëŸ‰

---

## 4. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 4.1 íŒŒì¼ ê¸°ë°˜ ë°ì´í„° ì €ì¥ì†Œ

í˜„ì¬ ì‹œìŠ¤í…œì€ **CSV íŒŒì¼ ê¸°ë°˜**ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

#### 4.1.1 history.csv (êµí†µ ì†ë„ íˆìŠ¤í† ë¦¬)

**ìŠ¤í‚¤ë§ˆ:**
```csv
section_id, date, day, hour, speed
```

**ì»¬ëŸ¼ ì„¤ëª…:**
| ì»¬ëŸ¼ëª… | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|------|
| section_id | INTEGER | êµ¬ê°„ ID (0: ì²œì•ˆ, 1: ì…ì¥, 2: ìˆ˜ì›) | 2 |
| date | STRING | ë‚ ì§œ | 2024-10-15 |
| day | INTEGER | ìš”ì¼ (0: ì›”ìš”ì¼ ~ 6: ì¼ìš”ì¼) | 3 |
| hour | INTEGER | ì‹œê°„ëŒ€ (0-23) | 14 |
| speed | INTEGER | í‰ê·  ì†ë„ (km/h) | 95 |

**ë°ì´í„° í¬ê¸°:**
- ì´ ë ˆì½”ë“œ: 11,004ê±´
- íŒŒì¼ í¬ê¸°: ì•½ 500KB

**ì‚¬ìš©ì²˜:**
- XGBoost ëª¨ë¸ í•™ìŠµ ë°ì´í„°
- í˜„ì¬ ì‹œê°„ëŒ€ ì†ë„ ì¡°íšŒ

#### 4.1.2 ì•ˆê°œì·¨ì•½.csv (ì•ˆê°œ ì·¨ì•½êµ¬ê°„)

**ìŠ¤í‚¤ë§ˆ:**
```csv
ë„ë¡œëª…, kmë²”ìœ„, êµ¬ê°„ëª…
```

**ì˜ˆì‹œ:**
```csv
ê²½ë¶€ê³ ì†ë„ë¡œ, 245~247km, ìˆ˜ì›ì‹ ê°ˆIC ë¶€ê·¼
ê²½ë¶€ê³ ì†ë„ë¡œ, 280~282km, ì•ˆì„±IC ë¶€ê·¼
```

**ì‚¬ìš©ì²˜:**
- `/api/vulnerable` - ì•ˆê°œ ì·¨ì•½êµ¬ê°„ ì¡°íšŒ

#### 4.1.3 í–‰ì •ì•ˆì „ë¶€_ìƒìŠµ ê²°ë¹™êµ¬ê°„.csv (ê²°ë¹™ ì·¨ì•½êµ¬ê°„)

**ìŠ¤í‚¤ë§ˆ:**
```csv
ì—°ë²ˆ, ì‹œë„, ì‹œêµ°êµ¬, ì§€ì—­, ë„ë¡œëª…, ..., ì‹œì‘ìœ„ë„, ì‹œì‘ê²½ë„, ...
```

**ì»¬ëŸ¼ ì„¤ëª…:**
| ì»¬ëŸ¼ ì¸ë±ìŠ¤ | ì»¬ëŸ¼ëª… | ì„¤ëª… |
|------------|--------|------|
| 0 | ì—°ë²ˆ | ì¼ë ¨ë²ˆí˜¸ |
| 3 | ì§€ì—­ | ì‹œêµ°êµ¬ (ì˜ˆ: ìˆ˜ì›ì‹œ) |
| 4 | ë„ë¡œëª… | ë„ë¡œ ì´ë¦„ |
| 6 | ì‹œì‘ìœ„ë„ | ìœ„ë„ ì¢Œí‘œ |
| 7 | ì‹œì‘ê²½ë„ | ê²½ë„ ì¢Œí‘œ |

**í•„í„°ë§ ì¡°ê±´:**
```javascript
// ìœ„ë„ 36.8~37.3, ê²½ë„ 126.9~127.3 (ìˆ˜ì›-ì²œì•ˆ êµ¬ê°„)
lat >= 36.8 && lat <= 37.3 && lng >= 126.9 && lng <= 127.3
```

**ì‚¬ìš©ì²˜:**
- `/api/vulnerable` - ê²°ë¹™ ì·¨ì•½êµ¬ê°„ ì¡°íšŒ

### 4.2 ë°ì´í„° í”Œë¡œìš°

#### 4.2.1 ì½ê¸° í”Œë¡œìš°
```
1. Node.js fs.readFileSync()
2. iconv-liteë¡œ EUC-KR â†’ UTF-8 ë³€í™˜
3. CSV íŒŒì‹± (split(','))
4. í•„í„°ë§ ë° ê°€ê³µ
5. JSON ì‘ë‹µ
```

#### 4.2.2 AI í•™ìŠµ í”Œë¡œìš°
```
1. pandas.read_csv('history.csv')
2. ë°ì´í„°í”„ë ˆì„ ìƒì„±
3. X = df[['day', 'hour']]
4. y = df['speed']
5. XGBoost ëª¨ë¸ í•™ìŠµ
```

---

## 5. API ì„¤ê³„

### 5.1 API ì—”ë“œí¬ì¸íŠ¸ ëª…ì„¸

#### 5.1.1 GET /api/cctv/list
**ì„¤ëª…:** CCTV ëª©ë¡ ì¡°íšŒ

**ìš”ì²­:**
```http
GET /api/cctv/list HTTP/1.1
Host: localhost:3000
```

**ì‘ë‹µ:**
```json
{
  "success": true,
  "list": [
    {
      "name": "ìˆ˜ì›ì‹ ê°ˆIC",
      "url": "https://cctv.its.go.kr/...",
      "lat": 37.255,
      "lng": 127.105
    },
    ...
  ]
}
```

**êµ¬í˜„ ì„¸ë¶€ì‚¬í•­:**
```javascript
// ITS API í˜¸ì¶œ
axios.get(URLS.CCTV, { httpsAgent: agent, timeout: 10000 })

// ë°ì´í„° ë§¤í•‘
list = data.map(i => ({
  name: i.cctvname,
  url: i.cctvurl,
  lat: i.coordy,
  lng: i.coordx
}))
```

---

#### 5.1.2 GET /api/traffic
**ì„¤ëª…:** ì‹¤ì‹œê°„ êµí†µ ì†ë„ ì¡°íšŒ

**ìš”ì²­:**
```http
GET /api/traffic HTTP/1.1
Host: localhost:3000
```

**ì‘ë‹µ:**
```json
{
  "success": true,
  "list": [
    {
      "name": "ìˆ˜ì›ì‹ ê°ˆIC",
      "lat": 37.255,
      "lng": 127.105,
      "speed": 95
    },
    {
      "name": "ì²œì•ˆIC",
      "lat": 36.845,
      "lng": 127.182,
      "speed": 85
    },
    ...
  ]
}
```

**êµ¬í˜„ ì„¸ë¶€ì‚¬í•­:**
```javascript
// history.csvì—ì„œ í˜„ì¬ ìš”ì¼/ì‹œê°„ëŒ€ ë°ì´í„° ì¡°íšŒ
const now = new Date();
const sectionSpeeds = { 0: [], 1: [], 2: [] };

// CSV íŒŒì‹± ë° í•„í„°ë§
if (parseInt(p[2]) === now.getDay() &&
    parseInt(p[3]) === now.getHours()) {
  sectionSpeeds[parseInt(p[0])].push(parseInt(p[4]));
}

// í‰ê·  ê³„ì‚°
final[s] = speeds.reduce((a,b)=>a+b,0) / speeds.length
```

**ë°ì´í„° ì†ŒìŠ¤:**
- CSV íŒŒì¼: `data/history.csv`
- ì‹¤ì‹œê°„ ê³„ì‚°: í˜„ì¬ ìš”ì¼/ì‹œê°„ëŒ€ ë§¤ì¹­

---

#### 5.1.3 GET /api/predict?id={ì„¹ì…˜ID}
**ì„¤ëª…:** AI ê¸°ë°˜ êµí†µ ì˜ˆì¸¡

**ìš”ì²­:**
```http
GET /api/predict?id=2 HTTP/1.1
Host: localhost:3000
```

**íŒŒë¼ë¯¸í„°:**
| íŒŒë¼ë¯¸í„° | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… | ì˜ˆì‹œ |
|---------|------|------|------|------|
| id | INTEGER | X | ì„¹ì…˜ ID (0: ì²œì•ˆ, 1: ì…ì¥, 2: ìˆ˜ì›) | 2 |

**ì‘ë‹µ:**
```json
{
  "status": "success",
  "speed": 85,
  "future_pred": 85,
  "current_normal": 92,
  "risk": "ğŸŸ© ì›í™œ ì˜ˆìƒ",
  "time_msg": "15ì‹œ ê¸°ì¤€ (1ì‹œê°„ í›„)",
  "forecast": [
    {"time": "14ì‹œ", "speed": 92},
    {"time": "15ì‹œ", "speed": 85},
    {"time": "16ì‹œ", "speed": 78},
    ...
  ]
}
```

**êµ¬í˜„ ì„¸ë¶€ì‚¬í•­:**
```javascript
// Python í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰
const python = spawn('python', [
  'ai_server.py',
  new Date().getDay(),    // ìš”ì¼ (0-6)
  new Date().getHours(),  // ì‹œê°„ (0-23)
  req.query.id || 0       // ì„¹ì…˜ ID
]);

// stdout ìº¡ì²˜
python.stdout.on('data', d => result += d.toString());

// JSON íŒŒì‹± í›„ ì‘ë‹µ
res.json(JSON.parse(result));
```

**AI ëª¨ë¸ íŒŒì´í”„ë¼ì¸:**
```python
# 1. ë°ì´í„° ë¡œë“œ
df = pd.read_csv('./data/history.csv')

# 2. ëª¨ë¸ í•™ìŠµ
X = df[['day', 'hour']]
y = df['speed']
model = XGBRegressor(n_estimators=100, max_depth=5)
model.fit(X, y)

# 3. ì˜ˆì¸¡
future_speed = model.predict([[day, hour+1]])

# 4. ìœ„í—˜ë„ ê³„ì‚°
if speed < 40: risk = "ì •ì²´"
elif speed < 80: risk = "ì„œí–‰"
else: risk = "ì›í™œ"
```

---

#### 5.1.4 GET /api/warnings
**ì„¤ëª…:** ëŒë°œ ìƒí™© ì¡°íšŒ

**ìš”ì²­:**
```http
GET /api/warnings HTTP/1.1
Host: localhost:3000
```

**ì‘ë‹µ:**
```json
{
  "success": true,
  "list": [
    {
      "type": "ì£¼ì˜",
      "msg": "ì°¨ëŸ‰ ê³ ì¥",
      "lat": 37.150,
      "lng": 127.100
    },
    ...
  ]
}
```

**ë°ì´í„° ì†ŒìŠ¤:**
- ITS API: `posIncidentInfo`

---

#### 5.1.5 GET /api/vms
**ì„¤ëª…:** VMS ì „ê´‘íŒ ì •ë³´ ì¡°íšŒ

**ìš”ì²­:**
```http
GET /api/vms HTTP/1.1
Host: localhost:3000
```

**ì‘ë‹µ:**
```json
{
  "success": true,
  "list": [
    {
      "id": "VMS001",
      "msg": "ì• 2km ì‚¬ê³  ë°œìƒ, ì„œí–‰",
      "lat": 37.100,
      "lng": 127.150
    },
    ...
  ]
}
```

**ë°ì´í„° ì†ŒìŠ¤:**
- ITS API: `vmsInfo`

---

#### 5.1.6 GET /api/dangerous
**ì„¤ëª…:** ìœ„í—˜ë¬¼ì§ˆ ìš´ì†¡ì°¨ëŸ‰ ì •ë³´

**ìš”ì²­:**
```http
GET /api/dangerous HTTP/1.1
Host: localhost:3000
```

**ì‘ë‹µ:**
```json
{
  "success": true,
  "list": [
    {
      "road": "ê²½ë¶€ê³ ì†ë„ë¡œ",
      "speed": 80,
      "x": 127.105,
      "y": 37.255
    },
    ...
  ]
}
```

**ë°ì´í„° ì†ŒìŠ¤:**
- ITS API: `dangerousCarInfo`

---

#### 5.1.7 GET /api/vulnerable
**ì„¤ëª…:** ì·¨ì•½êµ¬ê°„ ì •ë³´ (ì•ˆê°œ/ê²°ë¹™)

**ìš”ì²­:**
```http
GET /api/vulnerable HTTP/1.1
Host: localhost:3000
```

**ì‘ë‹µ:**
```json
{
  "success": true,
  "list": [
    {
      "type": "ì•ˆê°œ",
      "road": "ê²½ë¶€ê³ ì†ë„ë¡œ",
      "section": "245~247km (ìˆ˜ì›ì‹ ê°ˆIC ë¶€ê·¼)",
      "msg": "ê°€ì‹œê±°ë¦¬ ì£¼ì˜"
    },
    {
      "type": "ê²°ë¹™",
      "road": "ìˆ˜ì›ì‹œ",
      "section": "ê²½ë¶€ê³ ì†ë„ë¡œ ì§„ì…ë¡œ",
      "msg": "ë¯¸ë„ëŸ¼ ì£¼ì˜"
    },
    ...
  ]
}
```

**ë°ì´í„° ì†ŒìŠ¤:**
- CSV íŒŒì¼: `ì•ˆê°œì·¨ì•½.csv`, `í–‰ì •ì•ˆì „ë¶€_ìƒìŠµ ê²°ë¹™êµ¬ê°„.csv`

**í•„í„°ë§ ë¡œì§:**
```javascript
// ì•ˆê°œ: ê²½ë¶€ê³ ì†ë„ë¡œ 200~320km êµ¬ê°„
if (road.includes("ê²½ë¶€ê³ ì†ë„ë¡œ")) {
  const startKm = parseInt(kmRange.match(/(\d+)~/)[1]);
  if (startKm >= 200 && startKm <= 320) {
    list.push({...});
  }
}

// ê²°ë¹™: ìœ„ë„/ê²½ë„ ê¸°ë°˜ í•„í„°ë§
if (lat >= 36.8 && lat <= 37.3 &&
    lng >= 126.9 && lng <= 127.3) {
  list.push({...});
}
```

---

#### 5.1.8 GET /api/events
**ì„¤ëª…:** ì´ë²¤íŠ¸ ì •ë³´ ì¡°íšŒ

**ìš”ì²­:**
```http
GET /api/events HTTP/1.1
Host: localhost:3000
```

**ì‘ë‹µ:**
```json
{
  "success": true,
  "list": [
    {
      "type": "ê³µì‚¬",
      "msg": "ë„ë¡œ ë³´ìˆ˜ ê³µì‚¬ ì¤‘",
      "road": "ê²½ë¶€ê³ ì†ë„ë¡œ",
      "lat": 37.100,
      "lng": 127.150
    },
    ...
  ]
}
```

**ë°ì´í„° ì†ŒìŠ¤:**
- ITS API: `eventInfo`

---

### 5.2 API ê³µí†µ ì‚¬í•­

#### 5.2.1 ì—ëŸ¬ ì²˜ë¦¬
```javascript
// ëª¨ë“  APIëŠ” try-catchë¡œ ì—ëŸ¬ ì²˜ë¦¬
try {
  const response = await axios.get(url, { httpsAgent: agent });
  res.json({ success: true, list: data });
} catch (error) {
  res.json({ success: false, list: [] });
}
```

#### 5.2.2 ì¸ì½”ë”© ì²˜ë¦¬
```javascript
// ITS APIëŠ” EUC-KR ì‘ë‹µ ê°€ëŠ¥ì„±
const iconv = require('iconv-lite');
const content = iconv.decode(buffer, 'euc-kr');
```

#### 5.2.3 HTTPS ì¸ì¦ì„œ ì²˜ë¦¬
```javascript
// SSL ì¸ì¦ì„œ ê²€ì¦ ìš°íšŒ (ê°œë°œ í™˜ê²½)
const agent = new https.Agent({
  rejectUnauthorized: false
});
```

---

## 6. í™”ë©´ ì„¤ê³„

### 6.1 í˜ì´ì§€ êµ¬ì¡°

#### 6.1.1 ì „ì²´ ë ˆì´ì•„ì›ƒ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Header                       â”‚
â”‚  ğŸš— ê²½ë¶€ê³ ì†ë„ë¡œ êµí†µì •ë³´                       â”‚
â”‚  [í™ˆ] [ì‹¤ì‹œê°„ êµí†µ] [CCTV] [ì•ˆì „ì •ë³´]           â”‚
â”‚                                   [00:00:00]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚                Main Content                    â”‚
â”‚           (ì„¹ì…˜ë³„ ì „í™˜ í‘œì‹œ)                    â”‚
â”‚                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Footer                       â”‚
â”‚  Â© ê²½ë¶€ê³ ì†ë„ë¡œ êµí†µì •ë³´ ì‹œìŠ¤í…œ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ì„¹ì…˜ë³„ ìƒì„¸ ì„¤ê³„

#### 6.2.1 í™ˆ ì„¹ì…˜ (#home-section)

**êµ¬ì„± ìš”ì†Œ:**
```
Hero Banner
  - ì œëª©: "ì‹¤ì‹œê°„ êµí†µ ìƒí™© ëª¨ë‹ˆí„°ë§"
  - ë¶€ì œ: "AI ê¸°ë°˜ êµí†µ ì˜ˆì¸¡ ë° CCTV ë¶„ì„ ì‹œìŠ¤í…œ"

Quick Info Grid (4ê°œ ì¹´ë“œ)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ í˜„ì¬ ë„ë¡œ    â”‚ ì˜ˆìƒ ì†Œìš”   â”‚ ë„ë¡œ ì•ˆì „   â”‚ í˜„ì¬ ì£¼ì˜   â”‚
  â”‚ ìƒí™©         â”‚ ì‹œê°„         â”‚ ì§€ìˆ˜        â”‚ ì •ë³´        â”‚
  â”‚ [95 km/h]   â”‚ [45ë¶„]      â”‚ [85ì ]      â”‚ [3ê±´]       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AI ì˜ˆì¸¡ ì •ë³´
  - Chart.js ë¼ì¸ ì°¨íŠ¸
  - Xì¶•: ì‹œê°„ (í–¥í›„ 12ì‹œê°„)
  - Yì¶•: ì†ë„ (km/h)
```

**ë°ì´í„° ë°”ì¸ë”©:**
```javascript
// í˜„ì¬ ë„ë¡œ ìƒí™©
document.getElementById('home-avg-speed').textContent = avgSpeed;

// ì˜ˆìƒ ì†Œìš”ì‹œê°„
const distance = 63; // km (ìˆ˜ì›-ì²œì•ˆ)
const time = Math.round((distance / avgSpeed) * 60);
document.getElementById('home-travel-time').textContent = time;

// ì•ˆì „ ì§€ìˆ˜ (ì†ë„ ê¸°ë°˜ ê³„ì‚°)
const safetyScore = Math.min(100, Math.max(0, avgSpeed));
document.getElementById('home-safety-score').textContent = safetyScore;

// AI ì˜ˆì¸¡ ì°¨íŠ¸
const chart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: forecast.map(f => f.time),
    datasets: [{
      data: forecast.map(f => f.speed),
      borderColor: '#000',
      backgroundColor: 'rgba(0,0,0,0.1)'
    }]
  }
});
```

---

#### 6.2.2 ì‹¤ì‹œê°„ êµí†µ ì„¹ì…˜ (#traffic-section)

**êµ¬ì„± ìš”ì†Œ:**
```
ì§€ë„ ì»¨íŠ¸ë¡¤
  - ëŒë°œìƒí™© í‘œì‹œ [ON/OFF]
  - VMS ì •ë³´ í‘œì‹œ [ON/OFF]
  - ìœ„í—˜ë¬¼ì§ˆ ì°¨ëŸ‰ [ON/OFF]

ì§€ë„ (Leaflet.js)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                         â”‚
  â”‚     [ì§€ë„ íƒ€ì¼ - OpenStreetMap]         â”‚
  â”‚                                         â”‚
  â”‚     â€¢ ìˆ˜ì›ì‹ ê°ˆIC (95 km/h) ğŸŸ¢           â”‚
  â”‚     â€¢ ì²œì•ˆIC (85 km/h) ğŸŸ¡              â”‚
  â”‚     âš ï¸ ëŒë°œìƒí™©                         â”‚
  â”‚     ğŸ“‹ VMS                              â”‚
  â”‚                                         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì§€ë„ ë§ˆì»¤:**
```javascript
// êµí†µ ì†ë„ ë§ˆì»¤
const marker = L.circleMarker([lat, lng], {
  radius: 10,
  fillColor: getSpeedColor(speed),  // ì†ë„ì— ë”°ë¥¸ ìƒ‰ìƒ
  color: '#000',
  weight: 2,
  fillOpacity: 0.8
}).addTo(map);

// íŒì—…
marker.bindPopup(`
  <strong>${name}</strong><br>
  í‰ê·  ì†ë„: ${speed} km/h<br>
  ìƒíƒœ: ${status}
`);

// ìƒ‰ìƒ ë§¤í•‘
function getSpeedColor(speed) {
  if (speed >= 80) return '#28a745';  // ë…¹ìƒ‰ (ì›í™œ)
  if (speed >= 40) return '#ffc107';  // ë…¸ë€ìƒ‰ (ì„œí–‰)
  return '#dc3545';                   // ë¹¨ê°„ìƒ‰ (ì •ì²´)
}
```

---

#### 6.2.3 CCTV ì„¹ì…˜ (#cctv-section)

**êµ¬ì„± ìš”ì†Œ:**
```
CCTV ì„ íƒ
  [ë“œë¡­ë‹¤ìš´ ë©”ë‰´: ìˆ˜ì›ì‹ ê°ˆIC â–¼]

ë ˆì´ì•„ì›ƒ
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                 â”‚  AI ë¶„ì„ ê²°ê³¼    â”‚
  â”‚   CCTV ì˜ìƒ     â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
  â”‚   [LIVE]        â”‚  ìœ„í—˜ë„: ğŸŸ© ì›í™œ â”‚
  â”‚                 â”‚  ì˜ˆì¸¡ì†ë„: 85 km/hâ”‚
  â”‚   [ë¹„ë””ì˜¤]      â”‚                 â”‚
  â”‚                 â”‚  í‰ì†Œ íŒ¨í„´ ë¶„ì„  â”‚
  â”‚                 â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
  â”‚                 â”‚  í‰ì†Œ í‰ê· : 92   â”‚
  â”‚                 â”‚  í˜„ì¬ í‰ì†Œì™€     â”‚
  â”‚                 â”‚  ë¹„ìŠ·í•œ ì†ë„     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**CCTV ì˜ìƒ:**
```html
<video id="cctv-video"
       src="${cctv.url}"
       autoplay
       muted
       playsinline
       controls
       style="width:100%; height:100%; object-fit:cover;">
</video>
```

**AI ë¶„ì„ ë°ì´í„° ë°”ì¸ë”©:**
```javascript
// AI ì˜ˆì¸¡ API í˜¸ì¶œ
const data = await fetch(`/api/predict?id=${sectionId}`);

// ìœ„í—˜ë„ í‘œì‹œ
document.getElementById('ai-risk').textContent = data.risk;

// ì˜ˆì¸¡ ì†ë„
document.getElementById('ai-speed').textContent = `${data.speed} km/h`;

// í‰ì†Œ íŒ¨í„´
document.getElementById('disp-ai-normal').textContent = data.current_normal;
```

---

#### 6.2.4 ì•ˆì „ì •ë³´ ì„¹ì…˜ (#info-section)

**êµ¬ì„± ìš”ì†Œ:**
```
íƒ­ ë©”ë‰´
  [ëŒë°œìƒí™©] [ì·¨ì•½êµ¬ê°„] [VMS] [ìœ„í—˜ë¬¼ì§ˆ ì°¨ëŸ‰]

ì½˜í…ì¸  ì˜ì—­
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ğŸ“ ëŒë°œìƒí™© (3ê±´)                        â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚ âš ï¸ ì°¨ëŸ‰ ê³ ì¥ - ìˆ˜ì›ì‹ ê°ˆIC ë¶€ê·¼           â”‚
  â”‚ ğŸš§ ê³µì‚¬ - ì²œì•ˆIC ì§„ì…ë¡œ                 â”‚
  â”‚ ğŸ”¥ í™”ì¬ - ì…ì¥íœ´ê²Œì†Œ                    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë¦¬ìŠ¤íŠ¸ ë Œë”ë§:**
```javascript
// ëŒë°œìƒí™©
warnings.forEach(w => {
  const li = document.createElement('li');
  li.innerHTML = `
    <span class="icon">âš ï¸</span>
    <div>
      <strong>${w.msg}</strong>
      <span class="location">ìœ„ë„: ${w.lat}, ê²½ë„: ${w.lng}</span>
    </div>
  `;
  list.appendChild(li);
});

// ì·¨ì•½êµ¬ê°„
vulnerable.forEach(v => {
  const badge = v.type === 'ì•ˆê°œ' ? 'ğŸŒ«ï¸' : 'â„ï¸';
  const li = document.createElement('li');
  li.innerHTML = `
    <span class="badge">${badge} ${v.type}</span>
    <strong>${v.section}</strong>
    <span class="msg">${v.msg}</span>
  `;
  list.appendChild(li);
});
```

---

### 6.3 UI/UX ë””ìì¸ ê°€ì´ë“œ

#### 6.3.1 ìƒ‰ìƒ íŒ”ë ˆíŠ¸
```css
/* ê¸°ë³¸ ìƒ‰ìƒ */
--primary-black: #000000;
--primary-white: #FFFFFF;
--gray-100: #F8F9FA;
--gray-200: #E9ECEF;
--gray-300: #DEE2E6;

/* ìƒíƒœ ìƒ‰ìƒ */
--success: #28a745;  /* ì›í™œ (ë…¹ìƒ‰) */
--warning: #ffc107;  /* ì„œí–‰ (ë…¸ë€ìƒ‰) */
--danger: #dc3545;   /* ì •ì²´ (ë¹¨ê°„ìƒ‰) */
```

#### 6.3.2 íƒ€ì´í¬ê·¸ë˜í”¼
```css
/* í°íŠ¸ */
font-family: 'Pretendard', sans-serif;  /* í•œê¸€ */
font-family: 'Inter', sans-serif;       /* ìˆ«ì/ì˜ë¬¸ */

/* í¬ê¸° */
--font-size-xl: 2.5rem;   /* ì œëª© */
--font-size-lg: 1.5rem;   /* ì„œë¸Œ ì œëª© */
--font-size-md: 1rem;     /* ë³¸ë¬¸ */
--font-size-sm: 0.875rem; /* ì‘ì€ í…ìŠ¤íŠ¸ */
```

#### 6.3.3 ë ˆì´ì•„ì›ƒ
```css
/* ì»¨í…Œì´ë„ˆ */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

/* ê·¸ë¦¬ë“œ */
.quick-info-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
}

/* ë°˜ì‘í˜• */
@media (max-width: 768px) {
  .quick-info-grid {
    grid-template-columns: 1fr;
  }
}
```

---

## 7. AI ëª¨ë¸ ì„¤ê³„

### 7.1 XGBoost êµí†µ ì˜ˆì¸¡ ëª¨ë¸

#### 7.1.1 ëª¨ë¸ ê°œìš”
```
ëª¨ë¸ íƒ€ì…: XGBoost Regressor
ëª©ì : êµí†µ ì†ë„ ì˜ˆì¸¡ (íšŒê·€)
ì…ë ¥: ìš”ì¼(day), ì‹œê°„ëŒ€(hour)
ì¶œë ¥: ì˜ˆìƒ ì†ë„ (km/h)
```

#### 7.1.2 ëª¨ë¸ íŒŒë¼ë¯¸í„°
```python
model = XGBRegressor(
    n_estimators=100,      # íŠ¸ë¦¬ ê°œìˆ˜
    max_depth=5,           # ìµœëŒ€ ê¹Šì´
    learning_rate=0.1,     # í•™ìŠµë¥  (ê¸°ë³¸ê°’)
    random_state=42        # ì¬í˜„ì„±
)
```

#### 7.1.3 í•™ìŠµ ë°ì´í„°
```python
# ë°ì´í„° ë¡œë“œ
df = pd.read_csv('./data/history.csv')
# ì´ 11,004 ë ˆì½”ë“œ

# í”¼ì²˜ & íƒ€ê²Ÿ
X = df[['day', 'hour']]    # ì…ë ¥: ìš”ì¼, ì‹œê°„
y = df['speed']            # ì¶œë ¥: ì†ë„

# í•™ìŠµ
model.fit(X, y)
```

#### 7.1.4 ì˜ˆì¸¡ ë¡œì§
```python
# 1ì‹œê°„ í›„ ì˜ˆì¸¡
target_hour = (current_hour + 1) % 24
next_day = day if target_hour != 0 else (day + 1) % 7

# ì˜ˆì¸¡
future_speed = model.predict([[next_day, target_hour]])[0]
```

#### 7.1.5 í›„ì²˜ë¦¬ (ë³´ì •)
```python
# ìƒˆë²½ ì‹œê°„ ë³´ì • (22ì‹œ~06ì‹œ)
if 22 <= hour or hour <= 6:
    speed = max(90, speed)  # ìµœì†Œ 90 km/h ë³´ì¥

# ë³€ë™ì„± ì¶”ê°€
np.random.seed(cctv_id + day)
variance = np.random.randint(-10, 10)
final_speed = speed + variance

# ë²”ìœ„ ì œí•œ (10~120 km/h)
final_speed = max(10, min(120, final_speed))
```

#### 7.1.6 ìœ„í—˜ë„ ê³„ì‚°
```python
if speed < 40:
    risk = "ğŸŸ¥ ì •ì²´ ì˜ˆìƒ"
elif speed < 80:
    risk = "ğŸŸ¨ ì„œí–‰ ì˜ˆìƒ"
else:
    risk = "ğŸŸ© ì›í™œ ì˜ˆìƒ"
```

#### 7.1.7 12ì‹œê°„ ì˜ˆë³´ ìƒì„±
```python
forecast = []
for i in range(12):
    f_hour = (current_hour + i) % 24
    f_day = day
    if (current_hour + i) >= 24:
        f_day = (day + 1) % 7

    # ì˜ˆì¸¡
    pred = model.predict([[f_day, f_hour]])[0]

    # ìƒˆë²½ ë³´ì •
    if 22 <= f_hour or f_hour <= 6:
        pred = max(95, pred)

    # ë³€ë™ì„± & ë²”ìœ„ ì œí•œ
    final = int(max(10, min(120, pred + variance)))

    forecast.append({
        "time": f"{f_hour}ì‹œ",
        "speed": final
    })
```

### 7.2 ëª¨ë¸ ì„±ëŠ¥

#### 7.2.1 ì˜ˆì¸¡ ì •í™•ë„
```
í‰ê·  ì •í™•ë„: 60-70%
ì¶œí‡´ê·¼ ì‹œê°„ëŒ€: ì •í™•ë„ ë†’ìŒ
ì‹¬ì•¼ ì‹œê°„ëŒ€: ë°ì´í„° ë¶€ì¡±ìœ¼ë¡œ ë³´ì • ì ìš©
```

#### 7.2.2 í•œê³„ì 
```
âŒ ë‚ ì”¨ ì •ë³´ ë¯¸ë°˜ì˜ (ëˆˆ, ë¹„, ì•ˆê°œ)
âŒ ì‹¤ì‹œê°„ êµí†µ ìƒí™© ë¯¸ë°˜ì˜
âŒ ëŒë°œ ìƒí™© ë¯¸ë°˜ì˜
âŒ ê³µíœ´ì¼/ëª…ì ˆ ë¯¸ê³ ë ¤
```

#### 7.2.3 ê°œì„  ë°©ì•ˆ
```
âœ… ì‹¤ì‹œê°„ êµí†µ ì†ë„ ë°ì´í„° ê²°í•©
âœ… ë‚ ì”¨ API ì—°ë™
âœ… LSTM/Transformer ëª¨ë¸ ë„ì…
âœ… ë” ë§ì€ í”¼ì²˜ ì¶”ê°€ (ìš”ì¼, ê³„ì ˆ, ì´ë²¤íŠ¸)
```

---

## 8. ë³´ì•ˆ ì„¤ê³„

### 8.1 í˜„ì¬ êµ¬í˜„ëœ ë³´ì•ˆ

#### 8.1.1 HTTPS í†µì‹ 
```javascript
// ITS APIì™€ HTTPS í†µì‹ 
const agent = new https.Agent({
  rejectUnauthorized: false  // ê°œë°œ í™˜ê²½
});

axios.get(url, { httpsAgent: agent });
```

#### 8.1.2 API í‚¤ ê´€ë¦¬
```javascript
// API í‚¤ëŠ” ì„œë²„ ì¸¡ì—ë§Œ ì €ì¥
const MY_API_KEY = "dacf34d37c784ea0b9e9898b257e3e78";

// í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œë˜ì§€ ì•ŠìŒ
```

#### 8.1.3 ì…ë ¥ ê²€ì¦
```javascript
// ì„¹ì…˜ ID ê²€ì¦
const id = req.query.id || 0;

// Python í”„ë¡œì„¸ìŠ¤ ì¸ì ê²€ì¦
const day = parseInt(sys.argv[1]);
const hour = parseInt(sys.argv[2]);
```

### 8.2 ë³´ì•ˆ ì·¨ì•½ì  ë° ê°œì„  ë°©ì•ˆ

#### 8.2.1 ì·¨ì•½ì 
```
âŒ API í‚¤ í•˜ë“œì½”ë”© (server.js)
âŒ rejectUnauthorized: false (í”„ë¡œë•ì…˜ ë¶€ì í•©)
âŒ CORS ì„¤ì • ë¶€ì¬
âŒ Rate Limiting ì—†ìŒ
âŒ Input Validation ë¶€ì¡±
âŒ XSS ë°©ì–´ ë¶€ì¡±
```

#### 8.2.2 ê°œì„  ë°©ì•ˆ
```javascript
// 1. í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©
require('dotenv').config();
const MY_API_KEY = process.env.ITS_API_KEY;

// 2. SSL ì¸ì¦ì„œ ê²€ì¦ í™œì„±í™” (í”„ë¡œë•ì…˜)
const agent = new https.Agent({
  rejectUnauthorized: true
});

// 3. CORS ì„¤ì •
const cors = require('cors');
app.use(cors({
  origin: ['https://example.com'],
  methods: ['GET', 'POST']
}));

// 4. Rate Limiting
const rateLimit = require('express-rate-limit');
const limiter = rateLimit({
  windowMs: 15 * 60 * 1000,  // 15ë¶„
  max: 100                    // ìµœëŒ€ 100 ìš”ì²­
});
app.use('/api/', limiter);

// 5. Input Validation
const { body, query, validationResult } = require('express-validator');
app.get('/api/predict', [
  query('id').isInt({ min: 0, max: 2 })
], (req, res) => {
  const errors = validationResult(req);
  if (!errors.isEmpty()) {
    return res.status(400).json({ errors: errors.array() });
  }
  // ...
});

// 6. XSS ë°©ì–´
const xss = require('xss-clean');
app.use(xss());
```

---

## 9. ë°°í¬ ë° ìš´ì˜

### 9.1 ê°œë°œ í™˜ê²½

#### 9.1.1 ë¡œì»¬ ê°œë°œ
```bash
# ì„œë²„ ì‹¤í–‰
node server.js

# í¬íŠ¸
http://localhost:3000

# Python ì˜ì¡´ì„±
pip install xgboost scikit-learn pandas numpy
```

### 9.2 í”„ë¡œë•ì…˜ ë°°í¬

#### 9.2.1 ê¶Œì¥ ì•„í‚¤í…ì²˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         CDN (Cloudflare)             â”‚
â”‚         - ì •ì  íŒŒì¼ ìºì‹±              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Nginx (Reverse Proxy)          â”‚
â”‚       - SSL ì¸ì¦ì„œ                    â”‚
â”‚       - ë¡œë“œ ë°¸ëŸ°ì‹±                   â”‚
â”‚       - Gzip ì••ì¶•                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Node.js ì•± ì„œë²„ (PM2)             â”‚
â”‚    - Express.js                      â”‚
â”‚    - Child Process (Python)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 9.2.2 PM2 ì„¤ì •
```javascript
// ecosystem.config.js
module.exports = {
  apps: [{
    name: 'traffic-system',
    script: 'server.js',
    instances: 2,              // í´ëŸ¬ìŠ¤í„° ëª¨ë“œ
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    error_file: './logs/err.log',
    out_file: './logs/out.log',
    log_date_format: 'YYYY-MM-DD HH:mm:ss'
  }]
};

// ì‹¤í–‰
pm2 start ecosystem.config.js
```

#### 9.2.3 Nginx ì„¤ì •
```nginx
server {
    listen 80;
    server_name example.com;

    # HTTPS ë¦¬ë‹¤ì´ë ‰íŠ¸
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl http2;
    server_name example.com;

    # SSL ì¸ì¦ì„œ
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    # Gzip ì••ì¶•
    gzip on;
    gzip_types text/plain text/css application/json application/javascript;

    # ì •ì  íŒŒì¼
    location /static/ {
        alias /var/www/traffic-system/public/;
        expires 30d;
    }

    # API í”„ë¡ì‹œ
    location /api/ {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # ë£¨íŠ¸
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
    }
}
```

### 9.3 ëª¨ë‹ˆí„°ë§

#### 9.3.1 ë¡œê¹…
```javascript
// Winston ë¡œê¹…
const winston = require('winston');

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.json(),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
});

// ì‚¬ìš©
logger.info('API ìš”ì²­', { endpoint: '/api/traffic', ip: req.ip });
logger.error('ì—ëŸ¬ ë°œìƒ', { error: err.message, stack: err.stack });
```

#### 9.3.2 ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
```bash
# PM2 ëª¨ë‹ˆí„°ë§
pm2 monit

# ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
pm2 status

# ë¡œê·¸ í™•ì¸
pm2 logs
```

#### 9.3.3 ì™¸ë¶€ ëª¨ë‹ˆí„°ë§ ë„êµ¬
```
- New Relic: APM ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- Sentry: ì—ëŸ¬ íŠ¸ë˜í‚¹
- Datadog: ì¸í”„ë¼ ëª¨ë‹ˆí„°ë§
- Uptime Robot: ì›¹ì‚¬ì´íŠ¸ ê°€ìš©ì„± ì²´í¬
```

### 9.4 ë°±ì—… ë° ë³µêµ¬

#### 9.4.1 ë°ì´í„° ë°±ì—…
```bash
# CSV íŒŒì¼ ë°±ì—… (ì¼ì¼)
#!/bin/bash
DATE=$(date +%Y%m%d)
tar -czf backup-$DATE.tar.gz data/*.csv

# S3 ì—…ë¡œë“œ
aws s3 cp backup-$DATE.tar.gz s3://bucket/backups/
```

#### 9.4.2 ì½”ë“œ ë°±ì—…
```bash
# Git ì €ì¥ì†Œ
git push origin main

# GitHub / GitLab ìë™ ë°±ì—…
```

---

## 10. í™•ì¥ ë° ê°œì„  ê³„íš

### 10.1 ë‹¨ê¸° ê°œì„  (1-3ê°œì›”)
- [ ] ëª¨ë°”ì¼ ë°˜ì‘í˜• UI ê°œì„ 
- [ ] ì‹¤ì‹œê°„ ì•Œë¦¼ ê¸°ëŠ¥ (Web Push)
- [ ] ì‚¬ìš©ì ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥
- [ ] ë‹¤í¬ ëª¨ë“œ ì§€ì›

### 10.2 ì¤‘ê¸° ê°œì„  (3-6ê°œì›”)
- [ ] ë‚ ì”¨ API ì—°ë™
- [ ] LSTM ê¸°ë°˜ ê³ ë„í™” AI ëª¨ë¸
- [ ] ì‹¤ì‹œê°„ êµí†µ ë°ì´í„° DB ì €ì¥
- [ ] ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ

### 10.3 ì¥ê¸° ê°œì„  (6ê°œì›”+)
- [ ] ì‚¬ìš©ì ë§ì¶¤ ê²½ë¡œ ì¶”ì²œ
- [ ] Transformer ê¸°ë°˜ ë”¥ëŸ¬ë‹ ëª¨ë¸
- [ ] ìŒì„± ì•ˆë‚´ ê¸°ëŠ¥
- [ ] ì°¨ëŸ‰ ì—°ë™ (CarPlay / Android Auto)

---

## ë¶€ë¡

### A. ìš©ì–´ ì •ë¦¬
- **ITS**: ì§€ëŠ¥í˜• êµí†µ ì‹œìŠ¤í…œ (Intelligent Transportation System)
- **VMS**: ê°€ë³€ ë©”ì‹œì§€ í‘œì‹œ (Variable Message Sign)
- **CCTV**: íì‡„íšŒë¡œ í…”ë ˆë¹„ì „
- **XGBoost**: eXtreme Gradient Boosting
- **API**: Application Programming Interface

### B. ì°¸ê³  ë¬¸ì„œ
- ITS Open API ë¬¸ì„œ: https://www.its.go.kr/openapi

---


**ì‘ì„±ì¼:** 2025.12.06
**ì‘ì„±ì:** [ì¸ê³µì§€ëŠ¥ 7íŒ€ 20212432 / ì•ˆíƒœí˜„]
